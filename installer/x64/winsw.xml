<service>
  <!-- Identificação -->
  <id>appgestaoti-agent</id>
  <name>AppGestaoTI Agent</name>
  <description>Agente de telemetria e inventário do sistema AppGestaoTI</description>

  <!-- Binário que o WinSW vai gerenciar -->
  <executable>appgestaoti-agent.exe</executable>
  <arguments>service</arguments>
  <workingdirectory>%BASE%</workingdirectory>

  <!-- Logs -->
  <logpath>%PROGRAMDATA%\RabeloTech\AppGestaoTI\logs</logpath>
  <log mode="roll-by-size">
    <sizeThreshold>10485760</sizeThreshold> <!-- 10 MB -->
    <keepFiles>5</keepFiles>
  </log>

  <!-- Restart automático em caso de falha -->
  <onfailure action="restart" delay="5 sec"/>
  <onfailure action="restart" delay="30 sec"/>
  <onfailure action="restart" delay="5 min"/>

  <!-- Rodar como serviço do sistema -->
  <serviceaccount>
    <localsystem/>
  </serviceaccount>

  <!-- Iniciar junto com o Windows -->
  <startmode>Automatic</startmode>
</service>
